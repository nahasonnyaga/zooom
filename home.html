<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Home | Zooom Forum</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="Your personalized Zooom home.">
  <link rel="icon" href="assets/logo.png">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/navbar.css">
  <link rel="stylesheet" href="css/theme.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .feed-tabs { display: flex; gap: 1.2em; margin-top: 1.5em; justify-content: center; }
    .feed-tab-btn { padding: 0.6em 1.2em;border-radius:18px;font-weight:600;background:#f3f7ff;color:#2b2b2b;border:none;cursor:pointer;font-size:1.05em;transition:background 0.15s;}
    .feed-tab-btn.active, .feed-tab-btn:focus { background: #2563eb; color: #fff; }
    .feed-tab-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .feed-ui-section { max-width: 600px; margin: 2em auto 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 1.5em 2em; }
    .feed-ui-section h2 { margin-top: 0; }
    @media (max-width:650px) { .feed-ui-section { padding: 0.6em 0.1em; } .feed-tabs { flex-wrap: wrap; gap: 0.5em; } }
  </style>
</head>
<body class="theme-light">
  <div id="navbar"></div>
  <main>
    <div class="feed-tabs">
      <button class="feed-tab-btn active" id="tab-foryou" onclick="showTab('foryou')">For You</button>
      <button class="feed-tab-btn" id="tab-following" onclick="showTab('following')">Following</button>
      <button class="feed-tab-btn" id="tab-mentions" onclick="showTab('mentions')">Mentions</button>
      <button class="feed-tab-btn" id="tab-hashtags" onclick="showTab('hashtags')">#Hashtags</button>
      <button class="feed-tab-btn" id="tab-trending" onclick="showTab('trending')">Trending</button>
      <button class="feed-tab-btn" id="tab-newusers" onclick="showTab('newusers')">New Users</button>
      <button class="feed-tab-btn" id="tab-notifications" onclick="showTab('notifications')">Notifications</button>
      <button class="feed-tab-btn" id="tab-media" onclick="showTab('media')">Media</button>
    </div>
    <section class="feed-ui-section" id="section-foryou">
      <h2>For You</h2>
      <div id="foryou-feed">Loading personalized feed...</div>
    </section>
    <section class="feed-ui-section" id="section-following" style="display:none;">
      <h2>Following</h2>
      <div id="following-feed">Loading posts from users you follow...</div>
    </section>
    <section class="feed-ui-section" id="section-mentions" style="display:none;">
      <h2>Mentions</h2>
      <div id="mentions-feed">Loading posts where you are mentioned...</div>
    </section>
    <section class="feed-ui-section" id="section-hashtags" style="display:none;">
      <h2>#Hashtags</h2>
      <form id="hashtag-search-form" style="margin-bottom:1em;">
        <input type="text" id="hashtag-input" placeholder="Search hashtag..." style="padding:0.5em 1em;border-radius:16px;border:1px solid #cdd6e1;">
        <button type="submit" class="feed-tab-btn" style="padding:0.5em 1.2em;font-size:0.99em;">Search</button>
      </form>
      <div id="hashtags-feed">Enter a hashtag to search posts.</div>
    </section>
    <section class="feed-ui-section" id="section-trending" style="display:none;">
      <h2>Trending</h2>
      <div id="trending-feed">Loading trending topics...</div>
    </section>
    <section class="feed-ui-section" id="section-newusers" style="display:none;">
      <h2>New Users</h2>
      <div id="newusers-feed">Loading new users...</div>
    </section>
    <section class="feed-ui-section" id="section-notifications" style="display:none;">
      <h2>Notifications</h2>
      <div id="notifications-feed">Loading notifications...</div>
    </section>
    <section class="feed-ui-section" id="section-media" style="display:none;">
      <h2>Media</h2>
      <div id="media-feed">Loading posts with media...</div>
    </section>
    <section class="feed-ui-section" style="margin-bottom:2.5em;">
      <form id="logout-form">
        <button type="submit" class="feed-tab-btn" style="background:#f43f5e;color:#fff;">Logout</button>
      </form>
    </section>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="js/supabase.js"></script>
  <script src="js/theme.js"></script>
  <script>
    fetch('components/navbar.html').then(r => r.text()).then(html => {
      document.getElementById('navbar').innerHTML = html;
      if(window.lucide) lucide.createIcons();
    });
    if(localStorage.getItem('zooom-theme')==='dark') {
      document.body.classList.remove('theme-light');
      document.body.classList.add('theme-dark');
    }
    function showTab(tab) {
      const tabs = ['foryou','following','mentions','hashtags','trending','newusers','notifications','media'];
      tabs.forEach(t=>{
        document.getElementById('section-'+t).style.display = t===tab?'block':'none';
        document.getElementById('tab-'+t).classList.toggle('active', t===tab);
      });
    }
    // ... (feed loading logic as in previous message)
  </script>
</body>
</html>
